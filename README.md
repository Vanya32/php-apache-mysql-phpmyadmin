# Docker-стек с PHP, Apache, MySQL и phpMyAdmin

Этот проект разворачивает локальное окружение для веб-разработки с использованием Docker и Docker Compose. Внутри создаётся контейнер с Apache и PHP, база данных MySQL и интерфейс phpMyAdmin для удобного управления базой.

## Содержание
- [Что входит в стек](#что-входит-в-стек)
- [Требования](#требования)
- [Установка и запуск](#установка-и-запуск)
- [Структура проекта](#структура-проекта)
- [Настройка](#настройка)
- [Доступ к сервисам](#доступ-к-сервисам)
- [Общие рекомендации](#общие-рекомендации)

## Что входит в стек
- **PHP 8.1 + Apache**  
  - PHP с включённым расширением `mysqli`.  
  - Apache настроен на обслуживание файлов из папки `/var/www/html` (привязанной к `./src`).  
- **MySQL**  
  - Последняя стабильная версия официального образа MySQL.  
  - Конфигурация через `.env` (пользователь, пароль, база данных).  
- **phpMyAdmin**  
  - Интерфейс для работы с базой MySQL через браузер.

## Требования
- Установленный Docker.  
- Установленный Docker Compose (обычно входит в Docker Desktop).

## Установка и запуск
1. **Убедитесь, что Docker и Docker Compose установлены**:  
   - Скачать и установить Docker: [Официальное руководство по установке Docker](https://docs.docker.com/get-docker/)  
   - Скачать и установить Docker Compose: [Официальное руководство по установке Docker Compose](https://docs.docker.com/compose/install/)

2. **Клонируйте репозиторий**:  
   ```bash
   git clone <URL_репозитория>
   cd <название_папки_проекта>
   ```

3. **Создайте образ и запустите контейнеры**:  
   ```bash
   docker compose build
   docker compose up -d
   ```

4. **Проверьте запущенные контейнеры**:  
   ```bash
   docker ps
   ```

## Структура проекта
```
project/
├── src/                # Здесь находятся ваши PHP-файлы (index.php и др.)
│   └── index.php       # Пример файла с phpinfo()
├── .env                # Переменные окружения для MySQL
├── docker-compose.yml  # Описание контейнеров
└── Dockerfile          # Построение образа с PHP и Apache
```

## Настройка
- Порт для веб-сервера: `8082` (`http://localhost:8082/`).  
- Порт для phpMyAdmin: `8081` (`http://localhost:8081/`).  
- Порт для MySQL: `3306` (проброшен наружу, можно подключаться из других приложений).  

При необходимости измените порты в `docker-compose.yml` или параметры базы в `.env`.

## Доступ к сервисам
- **Веб-сайт**: `http://localhost:8082/`  
- **phpMyAdmin**: `http://localhost:8081/`  
  - **Вход**:  
    - Сервер: `db` (имя контейнера базы в сети Docker).  
    - Пользователь: из `.env` (например, `user`).  
    - Пароль: из `.env` (например, `password`).

## Общие рекомендации
- **Остановка контейнеров**:  
  ```bash
  docker compose down
  ```

- **Пересборка образа после изменений в `Dockerfile`**:  
  ```bash
  docker compose up --build -d
  ```

- **Сброс базы данных**:  
  - Удалите том Docker для MySQL:  
    ```bash
    docker compose down -v
    ```
  - Затем перезапустите контейнеры:  
    ```bash
    docker compose up --build -d
    ```

- Размещайте весь ваш код в папке `src`, она монтируется внутрь контейнера как `/var/www/html`.